(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const e of i)if(e.type==="childList")for(const n of e.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function c(i){const e={};return i.integrity&&(e.integrity=i.integrity),i.referrerpolicy&&(e.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?e.credentials="include":i.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(i){if(i.ep)return;i.ep=!0;const e=c(i);fetch(i.href,e)}})();const d={curve:{width:6,color:"hsla(216, 91%, 50%, 0.95)"},circles:{width:1,color:"#000",fill:"hsla(60, 93%, 50%, .35)"},ctrlLine:{width:1,color:""},point:{radius:15,width:5,color:"hsla(205, 98%, 50%, 0.95)",fill:"rgba(200, 0, 200, .9)",startAngle:0,endAngle:2*Math.PI},cpoint:{radius:10,width:2,color:"hsla(205, 98%, 50%, 0.95)",fill:"rgba(200, 0, 200, .9)",startAngle:0,endAngle:2*Math.PI}};function p(t){return`hsla(${t}, 100%, 50%, 0.95)`}var y;(t=>{function r(e){const n=e.points;return`ctx.beginPath();
ctx.moveTo(${n.p1.x}, ${n.p1.y});
`+(n.cp2?`ctx.bezierCurveTo(${n.cp1.x}, ${n.cp1.y}, ${n.cp2.x}, ${n.cp2.y}, ${n.p2.x}, ${n.p2.y});
`:`ctx.quadraticCurveTo(${n.cp1.x}, ${n.cp1.y}, ${n.p2.x}, ${n.p2.y});
`)+`ctx.stroke();
`}function c(e){const n=e.points;return`{ p1: {x: ${n.p1.x}, y: ${n.p1.y}}, p2: {x: ${n.p2.x}, y: ${n.p2.y}}, `+(n.cp2?`cp1: {x: ${n.cp1.x}, y: ${n.cp1.y}}, cp2: {x: ${n.cp2.x}, y: ${n.cp2.y}}`:`cp1: {x: ${n.cp1.x}, y: ${n.cp1.y}}`)+" }"}function o(e){return JSON.stringify(e)}function i(e){let n=`canvas = document.getElementById('canvas');
ctx = canvas.getContext('2d');
ctx.lineWidth = ${d.curve.width};
`;e.forEach(s=>n+=`
${r(s)}`);let l=`
const points = [`;return e.forEach(s=>l+=`
    ${c(s)},`),n+=`${l}
];`,n+=`
// prev = '${o(e)}';

`,n}t.showCode=i})(y||(y={}));var h;(t=>{function r(o,i){let e={points:{p1:{x:39,y:18},p2:{x:49,y:282},cp1:{x:9,y:116},cp2:{x:15,y:195}},color:p(10)},n=JSON.parse(JSON.stringify(e));return o&&delete n.points.cp2,Object.values(n.points).forEach(l=>l.x=l.x+i*80),n.color=p(i*40),n}t.initLine=r;function c(o,i){const e=i.points;o.lineWidth=d.curve.width,o.strokeStyle=i.color||"",o.beginPath(),o.moveTo(e.p1.x,e.p1.y),e.cp2?o.bezierCurveTo(e.cp1.x,e.cp1.y,e.cp2.x,e.cp2.y,e.p2.x,e.p2.y):o.quadraticCurveTo(e.cp1.x,e.cp1.y,e.p2.x,e.p2.y),o.stroke(),o.setLineDash([2,2]),o.lineWidth=d.ctrlLine.width,o.strokeStyle=d.ctrlLine.color,o.beginPath(),o.moveTo(e.p1.x,e.p1.y),o.lineTo(e.cp1.x,e.cp1.y),e.cp2?(o.moveTo(e.p2.x,e.p2.y),o.lineTo(e.cp2.x,e.cp2.y)):o.lineTo(e.p2.x,e.p2.y),o.stroke(),o.setLineDash([]);for(const[n,l]of Object.entries(i.points)){let s=n==="cp1"||n==="cp2";o.lineWidth=s?5:d.circles.width,o.strokeStyle="#00000040",o.fillStyle=s?d.circles.fill:i.color||"";let a=s?d.cpoint:d.point;o.beginPath(),o.arc(l.x,l.y,a.radius,a.startAngle,a.endAngle,!0),o.fill(),o.stroke()}}t.drawLine=c})(h||(h={}));function v(t,r){const c=Math.pow(d.point.radius,2);for(const[o,i]of Object.entries(t.points)){let e=i.x-r.x,n=i.y-r.y;if(t.color==="hsla(240, 100%, 50%, 0.95)"&&o==="p2"&&console.log("pt",i,"mouse",r,"dx,dy",`${e}`.padStart(5," "),`${n}`.padStart(5," "),"    (dx * dx) =",`${e*e}`.padStart(5," "),"    (dy * dy) =",`${n*n}`.padStart(5," "),"(dx2 + dy2) =",`${e*e+n*n}`.padStart(5," "),e*e+n*n<c,"distance",`${Math.sqrt(e*e+n*n)}`),e*e+n*n<c)return{line:t,member:o}}}function g(t,r){let c=[];function o(l){c=[];let s=n(l);for(var a=0;a<t.lines.length;a++){var u=t.lines[a];u.color==="hsla(240, 100%, 50%, 0.95)"&&console.log("----------",u);let f=v(u,s);if(f&&(c.push({line:f.line,member:f.member,pt:s}),!t.checkDragGroup.checked))break}c.length&&setTimeout(()=>t.canvas.classList.add("cursor-move"),0)}function i(l){if(c.length){let s=n(l);c.forEach(a=>{var f;const u=a.member&&((f=a.line)==null?void 0:f.points[a.member]);u&&a.pt&&(u.x+=s.x-a.pt.x,u.y+=s.y-a.pt.y,a.pt=s)}),r(t)}}function e(l){c=[],t.canvas.classList.remove("cursor-move"),r(t)}function n(l){return{x:l.pageX-t.canvas.offsetLeft,y:l.pageY-t.canvas.offsetTop}}return{dragStart:o,dragging:i,dragDone:e}}function $(){const t=document.getElementById("canvas"),r=t==null?void 0:t.getContext("2d"),c=document.getElementById("code"),o=document.getElementById("drag-group");if(!r||!c||!o){console.log("failed init");return}return{canvas:t,ctx:r,code:c,lines:[],checkDragGroup:o}}function x(t,r,c,o){for(let s=0;s<r;s++)t.lines.push(h.initLine(c,s));t.ctx.lineCap="round",t.ctx.lineJoin="round";const{dragStart:i,dragging:e,dragDone:n}=g(t,m);t.canvas.onmousedown=i,t.canvas.onmousemove=e,t.canvas.onmouseup=t.canvas.onmouseout=n,setTimeout(l,100);function l(){const s=getComputedStyle(t.canvas);console.log("css",s.width,s.height,"client",t.canvas.clientWidth,t.canvas.clientHeight),t.canvas.width=t.canvas.clientWidth,t.canvas.height=t.canvas.clientHeight,m(t)}window.addEventListener("resize",l)}function m(t){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height);let r=t.ctx.createLinearGradient(0,0,t.canvas.width,t.canvas.height);r.addColorStop(0,"tomato"),r.addColorStop(1,"purple"),t.ctx.fillStyle=r,t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height),t.lines.forEach(c=>h.drawLine(t.ctx,c)),t.code.innerText=y.showCode(t.lines)}function w(){const t=$();!t||(t.checkDragGroup.checked=!0,x(t,7,!1))}w();
