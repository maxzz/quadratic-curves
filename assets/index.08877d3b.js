(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const t of e.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function s(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerpolicy&&(e.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?e.credentials="include":n.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(n){if(n.ep)return;n.ep=!0;const e=s(n);fetch(n.href,e)}})();const p={curve:{width:6,color:"hsla(216, 91%, 50%, 0.95)"},circles:{width:3,color:"#000",fill:"hsla(100, 93%, 50%, 1)"},pline:{width:2,color:""},point:{radius:15,width:5,color:"hsla(205, 98%, 50%, 0.95)",fill:"rgba(200, 0, 200, .9)",arc1:0,arc2:2*Math.PI},cpoint:{radius:10,width:2,color:"hsla(205, 98%, 50%, 0.95)",fill:"rgba(200, 0, 200, .9)",arc1:0,arc2:2*Math.PI}};function h(c){return`hsla(${c}, 100%, 50%, 0.95)`}var f;(c=>{function r(o,n){let e={points:{p1:{x:39,y:18},p2:{x:49,y:282},cp1:{x:9,y:116},cp2:{x:15,y:195}},color:h(10)},t=JSON.parse(JSON.stringify(e));return o&&delete t.points.cp2,Object.values(t.points).forEach(i=>i.x=i.x+n*80),t.color=h(n*40),t}c.initLine=r;function s(o,n){o.lineWidth=p.curve.width,o.strokeStyle=n.color||"";const e=n.points;o.beginPath(),o.moveTo(e.p1.x,e.p1.y),e.cp2?o.bezierCurveTo(e.cp1.x,e.cp1.y,e.cp2.x,e.cp2.y,e.p2.x,e.p2.y):o.quadraticCurveTo(e.cp1.x,e.cp1.y,e.p2.x,e.p2.y),o.stroke(),o.lineWidth=p.pline.width,o.strokeStyle=p.pline.color,o.beginPath(),o.moveTo(e.p1.x,e.p1.y),o.lineTo(e.cp1.x,e.cp1.y),e.cp2?(o.moveTo(e.p2.x,e.p2.y),o.lineTo(e.cp2.x,e.cp2.y)):o.lineTo(e.p2.x,e.p2.y),o.stroke();for(const[t,i]of Object.entries(n.points)){let a=t==="cp1"||t==="cp2";o.lineWidth=a?p.cpoint.width:p.circles.width,o.strokeStyle=p.circles.color,o.fillStyle=a?p.circles.fill:n.color||"";let l=a?p.cpoint:p.point;o.beginPath(),o.arc(i.x,i.y,l.radius,l.arc1,l.arc2,!0),o.fill(),o.stroke()}}c.drawLine=s})(f||(f={}));function x(c,r){let s;if(Object.entries(c.points).find(o=>{const n=o==null?void 0:o[0],e=o==null?void 0:o[1];if(!n||!e)return;let t=e.x-r.x,i=e.y-r.y;if(t*t+i*i<p.point.radius*p.point.radius)return s=n,!0}),s)return{line:c,member:s}}function m(c,r){let s=[];function o(i){s=[];let a=t(i);for(var l=0;l<c.lines.length;l++){var u=c.lines[l];let d=x(u,a);if(d&&(console.log("res",d),s.push({line:d.line,member:d.member,pt:a}),!c.checkDragGroup.checked))break}s.length&&setTimeout(()=>c.canvas.classList.add("cursor-move"),0)}function n(i){if(s.length){let a=t(i);s.forEach(l=>{var d;const u=l.member&&((d=l.line)==null?void 0:d.points[l.member]);u&&l.pt&&(u.x+=a.x-l.pt.x,u.y+=a.y-l.pt.y,l.pt=a)}),r()}}function e(i){s=[],c.canvas.classList.remove("cursor-move"),r()}function t(i){return{x:i.pageX-c.canvas.offsetLeft,y:i.pageY-c.canvas.offsetTop}}return{dragStart:o,dragging:n,dragDone:e}}var y;(c=>{function r(e){const t=e.points;return`ctx.beginPath();
ctx.moveTo(${t.p1.x}, ${t.p1.y});
`+(t.cp2?`ctx.bezierCurveTo(${t.cp1.x}, ${t.cp1.y}, ${t.cp2.x}, ${t.cp2.y}, ${t.p2.x}, ${t.p2.y});
`:`ctx.quadraticCurveTo(${t.cp1.x}, ${t.cp1.y}, ${t.p2.x}, ${t.p2.y});
`)+`ctx.stroke();
`}function s(e){const t=e.points;return`{ p1: {x: ${t.p1.x}, y: ${t.p1.y}}, p2: {x: ${t.p2.x}, y: ${t.p2.y}}, `+(t.cp2?`cp1: {x: ${t.cp1.x}, y: ${t.cp1.y}}, cp2: {x: ${t.cp2.x}, y: ${t.cp2.y}}`:`cp1: {x: ${t.cp1.x}, y: ${t.cp1.y}}`)+" }"}function o(e){return JSON.stringify(e)}function n(e){let t=`canvas = document.getElementById('canvas');
ctx = canvas.getContext('2d');
ctx.lineWidth = ${p.curve.width};
`;e.forEach(a=>t+=`
${r(a)}`);let i=`
const points = [`;return e.forEach(a=>i+=`
    ${s(a)},`),t+=`${i}
];`,t+=`
// prev = '${o(e)}';

`,t}c.showCode=n})(y||(y={}));function v(){function c(){const n=document.getElementById("canvas"),e=n==null?void 0:n.getContext("2d"),t=document.getElementById("code"),i=document.getElementById("drag-group");if(!e||!t||!i){console.log("failed init");return}return{canvas:n,ctx:e,code:t,lines:[],checkDragGroup:i}}const r=c();if(!r)return;function s(n,e,t){for(let u=0;u<n;u++)r.lines.push(f.initLine(e,u));r.ctx.lineCap="round",r.ctx.lineJoin="round";const{dragStart:i,dragging:a,dragDone:l}=m(r,o);r.canvas.onmousedown=i,r.canvas.onmousemove=a,r.canvas.onmouseup=r.canvas.onmouseout=l,o()}function o(){r.ctx.clearRect(0,0,r.canvas.width,r.canvas.height);let n=r.ctx.createLinearGradient(0,0,r.canvas.width,r.canvas.height);n.addColorStop(0,"tomato"),n.addColorStop(1,"purple"),r.ctx.fillStyle=n,r.ctx.fillRect(0,0,r.canvas.width,r.canvas.height),r.lines.forEach(e=>f.drawLine(r.ctx,e)),r.code.innerText=y.showCode(r.lines)}r.checkDragGroup.checked=!0,s(7,!1)}v();
